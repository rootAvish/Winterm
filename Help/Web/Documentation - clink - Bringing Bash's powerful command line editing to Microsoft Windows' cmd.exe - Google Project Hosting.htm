<!DOCTYPE html>
<!-- saved from url=(0055)https://code.google.com/p/clink/wiki/Documentation?tm=6 -->
<html><script>var urchinTracker=function(){},_gaq={push:function(){try {if(arguments[0][0]=='_link')window.location.href=arguments[0][1]}catch(er){}}},_gat={_createTracker:function(){}, _getTracker:function(){return{__noSuchMethod__:function(){},_link:function(o){if(o)location.href=o;},_linkByPost:function(){return true;},_getLinkerUrl:function(o){return o;},_trackEvent:function(){}}}};</script><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
 
 <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
 
 <meta name="ROBOTS" content="NOARCHIVE">
 
 <link rel="icon" type="image/vnd.microsoft.icon" href="https://ssl.gstatic.com/codesite/ph/images/phosting.ico">
 
 
 <link rel="canonical" href="http://code.google.com/p/clink/wiki/Documentation">
 
 <script type="text/javascript" async="" src="https://apis.google.com/js/plusone.js"></script><script type="text/javascript">
 
 
 
 
 var codesite_token = null;
 
 
 var CS_env = {"domainName": null, "assetHostPath": "https://ssl.gstatic.com/codesite/ph", "relativeBaseUrl": "", "assetVersionPath": "https://ssl.gstatic.com/codesite/ph/3076573747170053082", "token": null, "projectHomeUrl": "/p/clink", "profileUrl": null, "projectName": "clink", "loggedInUserEmail": null};
 var _gaq = _gaq || [];
 _gaq.push(
 ['siteTracker._setAccount', 'UA-18071-1'],
 ['siteTracker._trackPageview']);
 
 _gaq.push(
 ['projectTracker._setAccount', 'UA-30253332-1'],
 ['projectTracker._trackPageview']);
 
 (function() {
 var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
 ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
 (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ga);
 })();
 
 </script><script type="text/javascript" async="" src="https://ssl.google-analytics.com/ga.js"></script>
 
 
 <title>Documentation - 
 clink -
 
 
 Bringing Bash's powerful command line editing to Microsoft Windows' cmd.exe - Google Project Hosting
 </title>
 <link type="text/css" rel="stylesheet" href="./Documentation - clink - Bringing Bash's powerful command line editing to Microsoft Windows' cmd.exe - Google Project Hosting_files/core.css">
 
 <link type="text/css" rel="stylesheet" href="./Documentation - clink - Bringing Bash's powerful command line editing to Microsoft Windows' cmd.exe - Google Project Hosting_files/ph_detail.css">
 
 
 
 <link type="application/atom+xml" rel="alternate" href="https://code.google.com/feeds/p/clink/gitchanges/basic?path=/Documentation.wiki&repo=wiki">
 
 
<!--[if IE]>
 <link type="text/css" rel="stylesheet" href="https://ssl.gstatic.com/codesite/ph/3076573747170053082/css/d_ie.css" >
<![endif]-->
 <style type="text/css">
 .menuIcon.off { background: no-repeat url(https://ssl.gstatic.com/codesite/ph/images/dropdown_sprite.gif) 0 -42px }
 .menuIcon.on { background: no-repeat url(https://ssl.gstatic.com/codesite/ph/images/dropdown_sprite.gif) 0 -28px }
 .menuIcon.down { background: no-repeat url(https://ssl.gstatic.com/codesite/ph/images/dropdown_sprite.gif) 0 0; }
 
 
 #maincol {
 padding-top: 0;
 padding-bottom: 0;
 }

 
 </style>
<style type="text/css"></style><style type="text/css">.adlesse-hidden{display:none!important;}				.adlesse-invisible{visibility:hidden!important;}								#adlesse_configPopup{position:fixed; background-color:#FFFFFF!important; z-index:5000!important; width:1px; height:1px;}				#adlesse_configPopup_overlay{z-index:4999!important; position:fixed; left:0; top:0; width:0; height:0; background:Black!important;}				#adlesse_configPopup_iframe{width:100%; height:100%; border:0; margin:0; padding:0;}								</style><style type="text/css">.adlesse-hidden{display:none!important;}				.adlesse-invisible{visibility:hidden!important;}				.adlesse-actionpanel{padding:0!important; margin:0!important; position:absolute!important; z-index:9999!important; border:solid #000000 1px!important; background:#ffffff!important; font-family:sans-serif!important; font-weight:normal!important; font-size:10px!important; text-decoration:none!important; color:#000000!important;}				.adlesse-actionpanel a{padding:0!important; margin:0!important; background:none repeat scroll 0 0 transparent!important; font-family:sans-serif!important; font-weight:normal!important; font-size:10px!important; text-decoration:none!important; color: #000000!important; display: inline-block !important }				.adlesse-actionpanel a:hover{text-decoration:underline!important; }				.adlesse-trans-65{opacity:0.65; filter:alpha(opacity=65); -moz-opacity:0.65; filter:progid:DXImageTransform.Microsoft.Alpha(Opacity=65); -khtml-opacity: 0.65; -ms-filter: 'progid:DXImageTransform.Microsoft.Alpha(Opacity=65)';}				.adlesse-rounded-corner{-moz-border-radius:3px; -webkit-border-radius:3px; -khtml-border-radius:3px; border-radius:3px;}								.adlesse-actionpanel-menu{position:absolute!important; z-index:9999!important;background:#ffffff!important; font-family:sans-serif!important; font-weight:normal!important; font-size:10px!important; text-decoration:none!important; color: #000000!important; border:1px solid #000000;text-align:center!important;padding:0!important; margin:5px!important; margin-top:1px!important;min-width:55px;}				.adlesse-actionpanel-menu-h {margin: 5px;list-style-type: none;}				.adlesse-actionpanel-menu-v {list-style-type: none;} 				.adlesse-actionpanel-menu-h li{background:#ffffff; cursor:pointer; display: inline-block; padding: 5px; zoom: 1;*display: inline;border-right:1px solid #cccccc}				.adlesse-actionpanel-menu-v li{background:#ffffff;cursor:pointer;padding:3px; border-bottom: 1px solid #000000;}								.adlesse-widget-div{}				.adlesse-widget-iframe{border:0px;}								</style></head>
<body class="t6" promptdialogcheckdone="1">
<script type="text/javascript">
 window.___gcfg = {lang: 'en'};
 (function() 
 {var po = document.createElement("script");
 po.type = "text/javascript"; po.async = true;po.src = "https://apis.google.com/js/plusone.js";
 var s = document.getElementsByTagName("script")[0];
 s.parentNode.insertBefore(po, s);
 })();
</script>
<div class="headbg">

 <div id="gaia">
 

 <span>
 
 
 <a href="https://code.google.com/p/clink/wiki/Documentation?tm=6#" id="projects-dropdown" onclick="return false;"><u>My favorites</u> <small>â–¼</small></a>
 | <a href="https://www.google.com/accounts/ServiceLogin?service=code&ltmpl=phosting&continue=https%3A%2F%2Fcode.google.com%2Fp%2Fclink%2Fwiki%2FDocumentation%3Ftm%3D6&followup=https%3A%2F%2Fcode.google.com%2Fp%2Fclink%2Fwiki%2FDocumentation%3Ftm%3D6" onclick="_CS_click(&#39;/gb/ph/signin&#39;);"><u>Sign in</u></a>
 
 </span>

 </div>

 <div class="gbh" style="left: 0pt;"></div>
 <div class="gbh" style="right: 0pt;"></div>
 
 
 <div style="height: 1px"></div>
<!--[if lte IE 7]>
<div style="text-align:center;">
Your version of Internet Explorer is not supported. Try a browser that
contributes to open source, such as <a href="http://www.firefox.com">Firefox</a>,
<a href="http://www.google.com/chrome">Google Chrome</a>, or
<a href="http://code.google.com/chrome/chromeframe/">Google Chrome Frame</a>.
</div>
<![endif]-->



 <table style="padding:0px; margin: 0px 0px 10px 0px; width:100%" cellpadding="0" cellspacing="0" itemscope="" itemtype="http://schema.org/CreativeWork">
 <tbody><tr style="height: 58px;">
 
 
 
 <td id="plogo">
 <link itemprop="url" href="https://code.google.com/p/clink">
 <a href="https://code.google.com/p/clink/">
 
 
 <img src="./Documentation - clink - Bringing Bash's powerful command line editing to Microsoft Windows' cmd.exe - Google Project Hosting_files/logo" alt="Logo" itemprop="image">
 
 </a>
 </td>
 
 <td style="padding-left: 0.5em">
 
 <div id="pname">
 <a href="https://code.google.com/p/clink/"><span itemprop="name">clink</span></a>
 </div>
 
 <div id="psum">
 <a id="project_summary_link" href="https://code.google.com/p/clink/"><span itemprop="description">Bringing Bash's powerful command line editing to Microsoft Windows' cmd.exe</span></a>
 
 </div>
 
 
 </td>
 <td style="white-space:nowrap;text-align:right; vertical-align:bottom;">
 
 <form action="https://code.google.com/hosting/search">
 <input size="30" name="q" value="" type="text">
 
 <input type="submit" name="projectsearch" value="Search projects">
 </form>
 
 </td></tr>
 </tbody></table>

</div>

 
<div id="mt" class="gtb"> 
 <a href="https://code.google.com/p/clink/" class="tab ">Project&nbsp;Home</a>
 
 
 
 
 <a href="https://code.google.com/p/clink/downloads/list" class="tab ">Downloads</a>
 
 
 
 
 
 <a href="./Documentation - clink - Bringing Bash's powerful command line editing to Microsoft Windows' cmd.exe - Google Project Hosting_files/Documentation - clink - Bringing Bash's powerful command line editing to Microsoft Windows' cmd.exe - Google Project Hosting.htm" class="tab active">Wiki</a>
 
 
 
 
 
 <a href="https://code.google.com/p/clink/issues/list" class="tab ">Issues</a>
 
 
 
 
 
 <a href="https://code.google.com/p/clink/source/checkout" class="tab ">Source</a>
 
 
 
 
 
 
 
 
 <div class="gtbc"></div>
</div>
<table cellspacing="0" cellpadding="0" width="100%" align="center" border="0" class="st">
 <tbody><tr>
 
 
 
 <td align="right" valign="top" class="bevel-right"></td>
 </tr>
</tbody></table>


<script type="text/javascript">
 var cancelBubble = false;
 function _go(url) { document.location = url; }
</script>
<div id="maincol">

 







<div>
<table>
 <tbody><tr>
 
 
 <td style="vertical-align:top; padding-left:5px">
 
 <div id="wikicontent">
 <div class="vt" id="wikimaincol">
 <p><strong>Clink</strong> </p><p>Martin Ridgers martin.ridgers+clink@gmail.com </p><p><i>v0.4</i> </p><ul><li>What is Clink? </li><li>Features </li><li>Usage </li><li>How Clink Works </li><li>Configuring Clink </li><ul><li>Settings </li></ul><li>Extending Clink </li><ul><li>The Location of Lua Scripts </li><li>Match Generators </li><li>Argument Completion </li><li>Filtering The Match Display </li><li>Customising The Prompt </li></ul><li>The Clink Lua API </li><ul><li>Matches </li><li>Argument Framework </li><li>Prompt Filtering </li><li>Miscellaneous </li><li>Readline Constants </li></ul><li>Powershell </li></ul><h2><a name="What_is_Clink?"></a>What is Clink?<a href="https://code.google.com/p/clink/wiki/Documentation?tm=6#What_is_Clink?" class="section_anchor"></a></h2><p><a href="http://code.google.com/p/clink" rel="nofollow">http://code.google.com/p/clink</a> </p><p>Clink combines the native Windows shell cmd.exe with the powerful command line editing features of the GNU Readline library, which provides rich completion, history, and line-editing capabilities. Readline is best known its use in the famous Unix shell Bash, the standard shell for Mac OS X and many Linux distributions. </p><h2><a name="Features"></a>Features<a href="https://code.google.com/p/clink/wiki/Documentation?tm=6#Features" class="section_anchor"></a></h2><ul><li>The same line editing as Bash (from GNU's Readline library). </li><li>History persistence between sessions. </li><li>Scriptable completion with Lua. </li><li>New keyboard shortcuts; </li><ul><li>Paste from clipboard (<i>Ctrl-V</i>). </li><li>Incremental history search (<i>Ctrl-R/Ctrl-S</i>). </li><li>Powerful completion (<i>TAB</i>). </li><li>Undo (<i>Ctrl-Z</i>). </li><li>Automatic "cd .." (<i>Ctrl-Alt-U</i>). </li><li>Environment variable expansion (<i>Ctrl-Alt-E</i>). </li></ul><li>Coloured and scriptable prompt. </li><li>Context sensitive completion; </li><ul><li>Executables (and aliases). </li><li>Directory commands. </li><li>Environment variables </li><li>Thirdparty tools; Git, Mercurial, SVN, Go, and P4. </li></ul><li>Auto-answering of the "Terminate batch job?" prompt. </li></ul><p>By default Clink binds <i>Alt-H</i> to display the current key bindings. More features can also be found in GNU's <a href="http://tinyurl.com/oum26rp" rel="nofollow">Readline</a> and <a href="http://tinyurl.com/p92oq5d" rel="nofollow">History</a> libraries' manuals. </p><h2><a name="Usage"></a>Usage<a href="https://code.google.com/p/clink/wiki/Documentation?tm=6#Usage" class="section_anchor"></a></h2><p>There are three ways to use Clink the first of which is to add Clink to cmd.exe's autorun registry entry. This can be selected when installing Clink using the installer and Clink also provides the ability to manage this autorun entry from the command line. Running <i>clink autorun --help</i> has more information. </p><p>The second alternative is to manually run Clink using the command //clink inject// from within a command prompt session to run Clink in that session. </p><p>The last option is to use the Clink shortcut that the installer adds to Windows' start menu. This is in essence a shortcut to the command //cmd.exe /k clink inject//. </p><h2><a name="How_Clink_Works"></a>How Clink Works<a href="https://code.google.com/p/clink/wiki/Documentation?tm=6#How_Clink_Works" class="section_anchor"></a></h2><p>When running Clink via the methods above, Clink checks the parent process is supported and injects a DLL into it. The DLL then hooks the WriteConsole() and ReadConsole() Windows functions. The former is so that Clink can capture the current prompt, and the latter hook allows Clink to provide it's own Readline-powered command line editing. </p><h2><a name="Configuring_Clink"></a>Configuring Clink<a href="https://code.google.com/p/clink/wiki/Documentation?tm=6#Configuring_Clink" class="section_anchor"></a></h2><p>The easiest way to configure Clink is to use Clink's <i>set</i> command line option. This can list, query, and set Clink's settings. Run <i>clink set --help</i> from a Clink-installed cmd.exe process to learn more both about how to use it and to get descriptions for Clink's various options. </p><p>Configuring Clink by and large involves configuring Readline by creating a <i>clink_inputrc</i> file. There is excellent documentation for all the options available to configure Readline in Readline's <a href="http://tinyurl.com/oum26rp" rel="nofollow">manual</a>. </p><p>Where Clink looks for <i>clink_inputrc</i> (as well as .lua scripts and the settings file) depends on which distribution of Clink was used. If you installed Clink using the .exe installer then Clink uses the current user's non-roaming application data folder. This user directory is usually found in one of the following locations; </p><ul><li>c:\documents and settings\<pre><span class="error">&lt;username&gt;</span></pre>\local settings\application data (XP) </li><li>c:\users\<pre><span class="error">&lt;username&gt;</span></pre>\appdata\local (Vista onwards) </li></ul><p>The .zip distribution of Clink uses a <i>profile</i> folder in the same folder where Clink's core files are found. </p><p>All of the above locations can be overriden using the <i>--profile </i></p><pre><i><span class="error">&lt;path&gt;</span></i></pre> command line option which is specified when injecting Clink into cmd.exe using <i>clink inject</i>. <p></p><h3><a name="Settings"></a>Settings<a href="https://code.google.com/p/clink/wiki/Documentation?tm=6#Settings" class="section_anchor"></a></h3><p>It is also possible to configure settings specific to Clink. These are stored in a file called <i>settings</i> which is found in one of the locations mentioned in the previous section. The settings file gets created the first time Clink is run. </p><p>The following table describes the available settings; </p><p></p><table class="wikitable"><tbody><tr><td style="border: 1px solid #ccc; padding: 5px;"> <strong>ctrld_exits</strong> </td><td style="border: 1px solid #ccc; padding: 5px;"> Ctrl-D exits the process when it is pressed on an empty line. </td></tr> <tr><td style="border: 1px solid #ccc; padding: 5px;"> <strong>esc_clears_line</strong> </td><td style="border: 1px solid #ccc; padding: 5px;"> Clink clears the current line when Esc is pressed (unless Readline's Vi mode is enabled). </td></tr> <tr><td style="border: 1px solid #ccc; padding: 5px;"> <strong>exec_match_style</strong> </td><td style="border: 1px solid #ccc; padding: 5px;"> Changes how Clink will match executables when there is no path separator on the line. 0 = PATH only, 1 = PATH and CWD, 2 = PATH, CWD, and directories. In all cases both executables and directories are matched when there is a path separator present. </td></tr> <tr><td style="border: 1px solid #ccc; padding: 5px;"> <strong>match_colour</strong> </td><td style="border: 1px solid #ccc; padding: 5px;"> Colour to use when displaying matches. A value less than 0 will be the opposite brightness of the default colour. </td></tr> <tr><td style="border: 1px solid #ccc; padding: 5px;"> <strong>prompt_colour</strong> </td><td style="border: 1px solid #ccc; padding: 5px;"> Surrounds the prompt in ANSI escape codes to set the prompt's colour. Disabled when the value is less than 0. </td></tr> <tr><td style="border: 1px solid #ccc; padding: 5px;"> <strong>terminate_autoanswer</strong> </td><td style="border: 1px solid #ccc; padding: 5px;"> Automatically answers cmd.exe's <i>Terminate batch job (Y/N)?</i> prompts. 0 = disabled, 1 = answer Y, 2 = answer N. </td></tr> <tr><td style="border: 1px solid #ccc; padding: 5px;"> <strong>persist_history</strong> </td><td style="border: 1px solid #ccc; padding: 5px;"> Enable or disable the saving and loading of command history between sessions. </td></tr> </tbody></table><p></p><h2><a name="Extending_Clink"></a>Extending Clink<a href="https://code.google.com/p/clink/wiki/Documentation?tm=6#Extending_Clink" class="section_anchor"></a></h2><p>The Readline library allows clients to offer an alternative path for creating completion matches. Clink uses this to hook Lua into the completion process making it possible to script the generation of matches with Lua scripts. The following sections describe this in more detail and shows some examples. </p><h3><a name="The_Location_of_Lua_Scripts"></a>The Location of Lua Scripts<a href="https://code.google.com/p/clink/wiki/Documentation?tm=6#The_Location_of_Lua_Scripts" class="section_anchor"></a></h3><p>Clink looks for Lua scripts in the folders as described in the <strong>Configuring Clink</strong> section. By default <i>Ctrl-Q</i> is mapped to reload all Lua scripts which can be useful when developing and iterating on your own scripts. </p><h3><a name="Match_Generators"></a>Match Generators<a href="https://code.google.com/p/clink/wiki/Documentation?tm=6#Match_Generators" class="section_anchor"></a></h3><p>These are Lua functions that are registered with Clink and are called as part of Readline's completion process. Match generator functions take the following form; </p><pre class="prettyprint"><span class="kwd">function</span><span class="pln"> my_match_generator</span><span class="pun">(</span><span class="pln">text</span><span class="pun">,</span><span class="pln"> first</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">last</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="pun">--</span><span class="pln"> </span><span class="typ">Use</span><span class="pln"> text</span><span class="pun">/</span><span class="pln">rl_state</span><span class="pun">.</span><span class="pln">line_buffer to create matches</span><span class="pun">,</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="pun">--</span><span class="pln"> </span><span class="typ">Submit</span><span class="pln"> matches to </span><span class="typ">Clink</span><span class="pln"> </span><span class="kwd">using</span><span class="pln"> clink</span><span class="pun">.</span><span class="pln">add_match</span><span class="pun">()</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="pun">--</span><span class="pln"> </span><span class="typ">Return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">/</span><span class="kwd">false</span><span class="pun">.</span><span class="pln"><br></span><span class="kwd">end</span></pre><p><i>Text</i> is the word that is being completed, <i>first</i> and <i>last</i> and the indices into the complete line buffer for <i>text</i> (the full line buffer can be accessed using the variable <i>rl_state.line_buffer</i>). If no further match generators need to be called then the function should return true. </p><p>Registering the match generation function is done as follows; </p><pre class="prettyprint"><span class="pln">clink</span><span class="pun">.</span><span class="pln">register_match_generator</span><span class="pun">(</span><span class="pln">my_match_generator</span><span class="pun">,</span><span class="pln"> sort_id</span><span class="pun">)</span></pre><p>The <i>sort_id</i> argument is used to sort the match generators such that generators with a lower sort ids are called first. </p><p>Here is an simple example script that checks if <i>text</i> begins with a <i>%</i> character and then uses the remained of <i>text</i> to match the names of environment variables. </p><pre class="prettyprint"><span class="kwd">function</span><span class="pln"> env_vars_match_generator</span><span class="pun">(</span><span class="pln">text</span><span class="pun">,</span><span class="pln"> first</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">last</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">if</span><span class="pln"> </span><span class="kwd">not</span><span class="pln"> text</span><span class="pun">:</span><span class="pln">find</span><span class="pun">(</span><span class="str">"^%%"</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">then</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">end</span><span class="pln"><br>&nbsp; &nbsp; <br>&nbsp; &nbsp; text </span><span class="pun">=</span><span class="pln"> clink</span><span class="pun">.</span><span class="pln">lower</span><span class="pun">(</span><span class="pln">text</span><span class="pun">:</span><span class="kwd">sub</span><span class="pun">(</span><span class="lit">2</span><span class="pun">))</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">local</span><span class="pln"> text_len </span><span class="pun">=</span><span class="pln"> </span><span class="com">#text</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">for</span><span class="pln"> _</span><span class="pun">,</span><span class="pln"> name </span><span class="kwd">in</span><span class="pln"> ipairs</span><span class="pun">(</span><span class="pln">clink</span><span class="pun">.</span><span class="pln">get_env_var_names</span><span class="pun">())</span><span class="pln"> </span><span class="kwd">do</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">if</span><span class="pln"> clink</span><span class="pun">.</span><span class="pln">lower</span><span class="pun">(</span><span class="pln">name</span><span class="pun">:</span><span class="kwd">sub</span><span class="pun">(</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> text_len</span><span class="pun">))</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> text </span><span class="kwd">then</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; clink</span><span class="pun">.</span><span class="pln">add_match</span><span class="pun">(</span><span class="str">'%'</span><span class="pun">..</span><span class="pln">name</span><span class="pun">..</span><span class="str">'%'</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">end</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">end</span><span class="pln"><br><br>&nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pln"><br></span><span class="kwd">end</span><span class="pln"><br><br>clink</span><span class="pun">.</span><span class="pln">register_match_generator</span><span class="pun">(</span><span class="pln">env_vars_match_generator</span><span class="pun">,</span><span class="pln"> </span><span class="lit">10</span><span class="pun">)</span></pre><h3><a name="Argument_Completion"></a>Argument Completion<a href="https://code.google.com/p/clink/wiki/Documentation?tm=6#Argument_Completion" class="section_anchor"></a></h3><p>Clink provides a framework for writing complex argument match generators in Lua. It works by creating a parser object that describes a command's arguments and flags and then registering the parser with Clink. When Clink detects the command is being entered on the current command line being editied, it uses the parser to generate matches. </p><p>Here is an example of a simple parser for the command <i>foobar</i>; </p><pre class="prettyprint"><span class="pln">my_parser </span><span class="pun">=</span><span class="pln"> clink</span><span class="pun">.</span><span class="pln">arg</span><span class="pun">.</span><span class="pln">new_parser</span><span class="pun">()</span><span class="pln"><br>my_parser</span><span class="pun">:</span><span class="pln">set_flags</span><span class="pun">(</span><span class="str">"-foo"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"-bar"</span><span class="pun">)</span><span class="pln"><br>my_parser</span><span class="pun">:</span><span class="pln">set_arguments</span><span class="pun">(</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="pun">{</span><span class="pln"> </span><span class="str">"hello"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"hi"</span><span class="pln"> </span><span class="pun">},</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="pun">{</span><span class="pln"> </span><span class="str">"world"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"wombles"</span><span class="pln"> </span><span class="pun">}</span><span class="pln"><br></span><span class="pun">)</span><span class="pln"><br><br>clink</span><span class="pun">.</span><span class="pln">arg</span><span class="pun">.</span><span class="pln">register_parser</span><span class="pun">(</span><span class="str">"foobar"</span><span class="pun">,</span><span class="pln"> my_parser</span><span class="pun">)</span></pre><p>This parser describes a command that has two positional arguments each with two potential options. It also has two flags which the parser considers to be position independent meaning that provided the word being completed starts with a certain prefix the parser with attempt to match the from the set of flags. </p><p>On the command line completion would look something like this; </p><pre class="prettyprint"><span class="pln">C</span><span class="pun">:\&gt;</span><span class="pln">foobar hello </span><span class="pun">-</span><span class="pln">foo wo<br>world &nbsp; wombles<br>C</span><span class="pun">:\&gt;</span><span class="pln">foobar hello </span><span class="pun">-</span><span class="pln">foo wo_</span></pre><h4><a name="More_Advanced_Stuff"></a>More Advanced Stuff<a href="https://code.google.com/p/clink/wiki/Documentation?tm=6#More_Advanced_Stuff" class="section_anchor"></a></h4><h5><a name="Linking_Parsers"></a>Linking Parsers<a href="https://code.google.com/p/clink/wiki/Documentation?tm=6#Linking_Parsers" class="section_anchor"></a></h5><p>There are often situations where the parsing of a command's arguments is dependent on the previous words (<i>git merge ...</i> compared to <i>git log ...</i> for example). For these scenarios Clink allows you to link parsers to arguments' words using Lua's concatenation operator. Parsers can also be concatenated with flags too. </p><pre class="prettyprint"><span class="pln">a_parser </span><span class="pun">=</span><span class="pln"> clink</span><span class="pun">.</span><span class="pln">arg</span><span class="pun">.</span><span class="pln">new_parser</span><span class="pun">():</span><span class="pln">set_arguments</span><span class="pun">({</span><span class="str">"foo"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"bar"</span><span class="pln"> </span><span class="pun">})</span><span class="pln"><br>b_parser </span><span class="pun">=</span><span class="pln"> clink</span><span class="pun">.</span><span class="pln">arg</span><span class="pun">.</span><span class="pln">new_parser</span><span class="pun">():</span><span class="pln">set_arguments</span><span class="pun">({</span><span class="pln"> </span><span class="str">"abc"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"123"</span><span class="pln"> </span><span class="pun">})</span><span class="pln"><br>c_parser </span><span class="pun">=</span><span class="pln"> clink</span><span class="pun">.</span><span class="pln">arg</span><span class="pun">.</span><span class="pln">new_parser</span><span class="pun">()</span><span class="pln"><br>c_parser</span><span class="pun">:</span><span class="pln">set_arguments</span><span class="pun">(</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="pun">{</span><span class="pln"> </span><span class="str">"foobar"</span><span class="pln"> </span><span class="pun">..</span><span class="pln"> b_parser </span><span class="pun">},</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="pun">{</span><span class="pln"> c_parser </span><span class="pun">}</span><span class="pln"><br></span><span class="pun">)</span></pre><p>As the example above shows, it is also possible to use a parser without concatenating it to a word. When Clink follows a link to a parser it is permanent and it will not return to the previous parser. </p><h5><a name="Functions_As_Argument_Options"></a>Functions As Argument Options<a href="https://code.google.com/p/clink/wiki/Documentation?tm=6#Functions_As_Argument_Options" class="section_anchor"></a></h5><p>Argument options are not limited solely to strings. Clink also accepts functions too so more context aware argument options can be used. </p><pre class="prettyprint"><span class="kwd">function</span><span class="pln"> rainbow_function</span><span class="pun">(</span><span class="pln">word</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="str">"red"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"white"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"blue"</span><span class="pln"> </span><span class="pun">}</span><span class="pln"><br></span><span class="kwd">end</span><span class="pln"><br><br>the_parser </span><span class="pun">=</span><span class="pln"> clink</span><span class="pun">.</span><span class="pln">arg</span><span class="pun">.</span><span class="pln">new_parser</span><span class="pun">()</span><span class="pln"><br>the_parser</span><span class="pun">:</span><span class="pln">set_arguments</span><span class="pun">(</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="pun">{</span><span class="pln"> </span><span class="str">"zippy"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"bungle"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"george"</span><span class="pln"> </span><span class="pun">},</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="pun">{</span><span class="pln"> rainbow_function</span><span class="pun">,</span><span class="pln"> </span><span class="str">"yellow"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"green"</span><span class="pln"> </span><span class="pun">}</span><span class="pln"><br></span><span class="pun">)</span></pre><p>The functions take a single argument which is a word from the command line being edited (or partial word if it is the one under the cursor). Functions should return a table of potential matches (or an empty table if it calls clink.add_match() directly itself). </p><h3><a name="Filtering_The_Match_Display"></a>Filtering The Match Display<a href="https://code.google.com/p/clink/wiki/Documentation?tm=6#Filtering_The_Match_Display" class="section_anchor"></a></h3><p>In some instances it may be preferable to display potential matches in an alternative form than the generated matches passed to and used internally by Readline. This happens for example with Readline's standard file name matches, where the matches are the whole word being completed but only the last part of the path is shown (e.g. the match <i>foo/bar</i> is displayed as <i>bar</i>). </p><p>To facilitate custom match generators that may wish to do this there is the <i>clink.match_display_filter</i> variable. This can be set to a function that will then be called before matches are to be displayed. </p><pre class="prettyprint"><span class="kwd">function</span><span class="pln"> my_display_filter</span><span class="pun">(</span><span class="pln">matches</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; new_matches </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{}</span><span class="pln"><br><br>&nbsp; &nbsp; </span><span class="kwd">for</span><span class="pln"> _</span><span class="pun">,</span><span class="pln"> m </span><span class="kwd">in</span><span class="pln"> ipairs</span><span class="pun">(</span><span class="pln">matches</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">do</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">local</span><span class="pln"> _</span><span class="pun">,</span><span class="pln"> _</span><span class="pun">,</span><span class="pln"> n </span><span class="pun">=</span><span class="pln"> m</span><span class="pun">:</span><span class="pln">find</span><span class="pun">(</span><span class="str">"\\([^\\]+)$"</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; table</span><span class="pun">.</span><span class="pln">insert</span><span class="pun">(</span><span class="pln">new_matches</span><span class="pun">,</span><span class="pln"> n</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">end</span><span class="pln"><br><br>&nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> new_matches<br></span><span class="kwd">end</span><span class="pln"><br><br></span><span class="kwd">function</span><span class="pln"> my_match_generator</span><span class="pun">(</span><span class="pln">text</span><span class="pun">,</span><span class="pln"> first</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">last</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="pun">...</span><span class="pln"><br><br>&nbsp; &nbsp; clink</span><span class="pun">.</span><span class="pln">match_display_filter </span><span class="pun">=</span><span class="pln"> my_display_filter<br>&nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pln"><br></span><span class="kwd">end</span></pre><p>The function's single argument <i>matches</i> is a table containing what Clink is going to display. The return value is a table with the input matches filtered as required by the match generator. The value of <i>clink.match_display_filter</i> is reset every time match generation is invoked. </p><h3><a name="Customising_The_Prompt"></a>Customising The Prompt<a href="https://code.google.com/p/clink/wiki/Documentation?tm=6#Customising_The_Prompt" class="section_anchor"></a></h3><p>Before Clink displays the prompt it filters the prompt through Lua so that the prompt can be customised. This happens each and every time that the prompt is shown which allows for context sensitive customisations (such as showing the current branch of a git repository for example). </p><p>Writing a prompt filter is straight forward and best illustrated with an example that displays the current git branch when the current directory is a git repository. </p><pre class="prettyprint"><span class="kwd">function</span><span class="pln"> git_prompt_filter</span><span class="pun">()</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">for</span><span class="pln"> line </span><span class="kwd">in</span><span class="pln"> io</span><span class="pun">.</span><span class="pln">popen</span><span class="pun">(</span><span class="str">"git branch 2&gt;nul"</span><span class="pun">):</span><span class="pln">lines</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">do</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">local</span><span class="pln"> m </span><span class="pun">=</span><span class="pln"> line</span><span class="pun">:</span><span class="pln">match</span><span class="pun">(</span><span class="str">"%* (.+)$"</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">if</span><span class="pln"> m </span><span class="kwd">then</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; clink</span><span class="pun">.</span><span class="pln">prompt</span><span class="pun">.</span><span class="pln">value </span><span class="pun">=</span><span class="pln"> </span><span class="str">"["</span><span class="pun">..</span><span class="pln">m</span><span class="pun">..</span><span class="str">"] "</span><span class="pun">..</span><span class="pln">clink</span><span class="pun">.</span><span class="pln">prompt</span><span class="pun">.</span><span class="pln">value<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">break</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">end</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">end</span><span class="pln"><br><br>&nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pln"><br></span><span class="kwd">end</span><span class="pln"><br><br>clink</span><span class="pun">.</span><span class="pln">prompt</span><span class="pun">.</span><span class="pln">register_filter</span><span class="pun">(</span><span class="pln">git_prompt_filter</span><span class="pun">,</span><span class="pln"> </span><span class="lit">50</span><span class="pun">)</span></pre><p>The filter function takes no arguments instead receiving and modifying the prompt through the <i>clink.prompt.value</i> variable. It returns true if the prompt filtering is finished, and false if it should continue on to the next registered filter. </p><p>A filter function is registered into the filter chain by passing the function to <i>clink.prompt.register_filter()</i> along with a sort id which dictates the order in which filters are called. Lower sort ids are called first. </p><h2><a name="The_Clink_Lua_API"></a>The Clink Lua API<a href="https://code.google.com/p/clink/wiki/Documentation?tm=6#The_Clink_Lua_API" class="section_anchor"></a></h2><h3><a name="Matches"></a>Matches<a href="https://code.google.com/p/clink/wiki/Documentation?tm=6#Matches" class="section_anchor"></a></h3><h4><a name="clink.add_match(text)"></a>clink.add_match(text)<a href="https://code.google.com/p/clink/wiki/Documentation?tm=6#clink.add_match(text)" class="section_anchor"></a></h4><p>Outputs <i>text</i> as a match for the active completion. </p><h4><a name="clink.compute_lcd(text,_matches)"></a>clink.compute_lcd(text, matches)<a href="https://code.google.com/p/clink/wiki/Documentation?tm=6#clink.compute_lcd(text,_matches)" class="section_anchor"></a></h4><p>Returns the least-common-denominator of <i>matches</i>. It is assumed that <i>text</i> was the input to generate <i>matches</i>. As such it is expected that each match starts with <i>text</i>. </p><h4><a name="clink.get_match(index)"></a>clink.get_match(index)<a href="https://code.google.com/p/clink/wiki/Documentation?tm=6#clink.get_match(index)" class="section_anchor"></a></h4><p>Returns a match by <i>index</i> from the matches output by clink.add_match(). </p><h4><a name="clink.is_match(needle,_candidate)"></a>clink.is_match(needle, candidate)<a href="https://code.google.com/p/clink/wiki/Documentation?tm=6#clink.is_match(needle,_candidate)" class="section_anchor"></a></h4><p>Given a <i>needle</i> (such as the section of the current line buffer being completed), this function returns true or false if <i>candidate</i> begins with <i>needle</i>. Readline's -/<i> case-mapping is respected if it is enabled. </i></p><h4><a name="clink.is_single_match(matches)"></a>clink.is_single_match(matches)<a href="https://code.google.com/p/clink/wiki/Documentation?tm=6#clink.is_single_match(matches)" class="section_anchor"></a></h4><p>Checks each match in the table <i>matches</i> and checks to see if they are all duplicates of each other. </p><h4><a name="clink.match_count()"></a>clink.match_count()<a href="https://code.google.com/p/clink/wiki/Documentation?tm=6#clink.match_count()" class="section_anchor"></a></h4><p>Returns the number of matches output by calls to clink.add_match(). </p><h4><a name="clink.match_display_filter"></a>clink.match_display_filter<a href="https://code.google.com/p/clink/wiki/Documentation?tm=6#clink.match_display_filter" class="section_anchor"></a></h4><p>This variable can be set to a function so that matches can be filtered before they are displayed. See <strong>Display Filtering</strong> section for more info. </p><h4><a name="clink.matches_are_files()"></a>clink.matches_are_files()<a href="https://code.google.com/p/clink/wiki/Documentation?tm=6#clink.matches_are_files()" class="section_anchor"></a></h4><p>Tells Readline that the matches we are passing back to it are files. This will cause Readline to append the path separator character to the line if there's only one match, and mark directories when displaying multiple matches. </p><h4><a name="clink.register_match_generator(generator,_sort_id)"></a>clink.register_match_generator(generator, sort_id)<a href="https://code.google.com/p/clink/wiki/Documentation?tm=6#clink.register_match_generator(generator,_sort_id)" class="section_anchor"></a></h4><p>Registers a match <i>generator</i> function that is called to generate matches when the complete keys is press (TAB by default). </p><p>The generator function takes the form <i>generator_function(text, first, last)</i> where <i>text</i> is the portion of the line buffer that is to be completed, <i>first</i> and <i>last</i> are the start and end indices into the line buffer for <i>text</i>. </p><h4><a name="clink.set_match(index,_value)"></a>clink.set_match(index, value)<a href="https://code.google.com/p/clink/wiki/Documentation?tm=6#clink.set_match(index,_value)" class="section_anchor"></a></h4><p>Explicitly sets match at <i>index</i> to <i>value</i>. </p><h3><a name="Argument_Framework"></a>Argument Framework<a href="https://code.google.com/p/clink/wiki/Documentation?tm=6#Argument_Framework" class="section_anchor"></a></h3><h4><a name="parser:be_precise()"></a>parser:be_precise()<a href="https://code.google.com/p/clink/wiki/Documentation?tm=6#parser:be_precise()" class="section_anchor"></a></h4><p>Ordinarily Clink only loosely matches word as it traverses a parser. Calling this will make Clink only accept an exact matching word to consider moving onto the next one. </p><h4><a name="parser:disable_file_matching()"></a>parser:disable_file_matching()<a href="https://code.google.com/p/clink/wiki/Documentation?tm=6#parser:disable_file_matching()" class="section_anchor"></a></h4><p>If this is called then Clink will not default to matching the file system if parsing comes to an end or can not be completed. </p><h4><a name="parser:dump()"></a>parser:dump()<a href="https://code.google.com/p/clink/wiki/Documentation?tm=6#parser:dump()" class="section_anchor"></a></h4><p>Prints the parser to stdout. </p><h4><a name="parser:go(parts)"></a>parser:go(parts)<a href="https://code.google.com/p/clink/wiki/Documentation?tm=6#parser:go(parts)" class="section_anchor"></a></h4><p>This runs the parser for the table of words <i>parts</i>. It returns a table of argument options. It is this method that Clink uses internally. </p><h4><a name="parser:is_flag(word)"></a>parser:is_flag(word)<a href="https://code.google.com/p/clink/wiki/Documentation?tm=6#parser:is_flag(word)" class="section_anchor"></a></h4><p>Returns true of <i>word</i> is a valid flag. </p><h4><a name="parser:loop(index)"></a>parser:loop(index)<a href="https://code.google.com/p/clink/wiki/Documentation?tm=6#parser:loop(index)" class="section_anchor"></a></h4><p>By default parsers do not loop and parsing comes to an end when there are no more arguments to traverse through. If loop() is called Clink will loop back to argument at <i>index</i> rather than terminating the parse. </p><h4><a name="parser:set_arguments(table1,_table2,_...)"></a>parser:set_arguments(table1, table2, ...)<a href="https://code.google.com/p/clink/wiki/Documentation?tm=6#parser:set_arguments(table1,_table2,_...)" class="section_anchor"></a></h4><p>This method sets the parsers positional arguments. Each of the variable number of arguments to the method is a table of potential options for the argument at that position. </p><h4><a name="parser:set_flags(flag1,_flag2,_...)"></a>parser:set_flags(flag1, flag2, ...)<a href="https://code.google.com/p/clink/wiki/Documentation?tm=6#parser:set_flags(flag1,_flag2,_...)" class="section_anchor"></a></h4><p>Sets the parser's flags (which can be thought of as position independent arguments). Each argument is a string and must start with the expected flag prefix ("-" by default). </p><h3><a name="Prompt_Filtering"></a>Prompt Filtering<a href="https://code.google.com/p/clink/wiki/Documentation?tm=6#Prompt_Filtering" class="section_anchor"></a></h3><h4><a name="clink.prompt.register_filter(filter,_sort_id)"></a>clink.prompt.register_filter(filter, sort_id)<a href="https://code.google.com/p/clink/wiki/Documentation?tm=6#clink.prompt.register_filter(filter,_sort_id)" class="section_anchor"></a></h4><p>Used to register a <i>filter</i> function to pre-process the prompt before use by Readline. Filters are called by <i>sort_id</i> where lower sort ids get called first. Filter functions will receive no arguments and return true if filtering is finished. Getting and setting the prompt value is done through the <i>clink.prompt.value</i> variable. </p><h4><a name="clink.prompt.value"></a>clink.prompt.value<a href="https://code.google.com/p/clink/wiki/Documentation?tm=6#clink.prompt.value" class="section_anchor"></a></h4><p>User-provided prompt filter functions can get and set the prompt value using this variable. </p><h3><a name="Miscellaneous"></a>Miscellaneous<a href="https://code.google.com/p/clink/wiki/Documentation?tm=6#Miscellaneous" class="section_anchor"></a></h3><h4><a name="clink.chdir(path)"></a>clink.chdir(path)<a href="https://code.google.com/p/clink/wiki/Documentation?tm=6#clink.chdir(path)" class="section_anchor"></a></h4><p>Changes the current working directory to <i>path</i>. Clink caches and restores the working directory between calls to the match generation so that it does not interfere with the processes normal operation. </p><h4><a name="clink.find_dirs(mask,_case_map)"></a>clink.find_dirs(mask, case_map)<a href="https://code.google.com/p/clink/wiki/Documentation?tm=6#clink.find_dirs(mask,_case_map)" class="section_anchor"></a></h4><p>Returns a table (array) of directories that match the supplied <i>mask</i>. If <i>case_map</i> is <i>true</i> then Clink will adjust the last part of the mask's path so that returned matches respect Readline's case-mapping feature (if it is enabled). For example; <i>.\foo_foo\bar_bar<strong></strong></i><strong> becomes <i>.\foo_foo\bar?bar</i></strong>. </p><p>There is no support for recursively traversing the path in <i>mask</i>. </p><h4><a name="clink.find_files(mask,_case_map)"></a>clink.find_files(mask, case_map)<a href="https://code.google.com/p/clink/wiki/Documentation?tm=6#clink.find_files(mask,_case_map)" class="section_anchor"></a></h4><p>Returns a table (array) of files that match the supplied <i>mask</i>. See <i>find_dirs</i> for details on the <i>case_map</i> argument. </p><p>There is no support for recursively traversing the path in <i>mask</i>. </p><h4><a name="clink.get_cwd()"></a>clink.get_cwd()<a href="https://code.google.com/p/clink/wiki/Documentation?tm=6#clink.get_cwd()" class="section_anchor"></a></h4><p>Returns the current working directory. </p><h4><a name="clink.get_console_aliases()"></a>clink.get_console_aliases()<a href="https://code.google.com/p/clink/wiki/Documentation?tm=6#clink.get_console_aliases()" class="section_anchor"></a></h4><p>Returns a table of all the registered console aliases. Windows' console alias API is exposed via <i>doskey</i> or progromatically via the AddConsoleAlias() function. </p><h4><a name="clink.get_env(env_var_name)"></a>clink.get_env(env_var_name)<a href="https://code.google.com/p/clink/wiki/Documentation?tm=6#clink.get_env(env_var_name)" class="section_anchor"></a></h4><p>Returns the value of the environment variable <i>env_var_name</i>. This is preferable to the built-in Lua function os.getenv() as the latter uses a cached version of the current process' environment which can result in incorrect results. </p><h4><a name="clink.get_env_var_names()"></a>clink.get_env_var_names()<a href="https://code.google.com/p/clink/wiki/Documentation?tm=6#clink.get_env_var_names()" class="section_anchor"></a></h4><p>Returns a table of the names of the current process' environment variables. </p><h4><a name="clink.get_host_process()"></a>clink.get_host_process()<a href="https://code.google.com/p/clink/wiki/Documentation?tm=6#clink.get_host_process()" class="section_anchor"></a></h4><p>Returns the name of the host process (the rl_readline_name variable). </p><h4><a name="clink.get_screen_info()"></a>clink.get_screen_info()<a href="https://code.google.com/p/clink/wiki/Documentation?tm=6#clink.get_screen_info()" class="section_anchor"></a></h4><p>Returns a table describing the current console buffer's state with the following contents; </p><pre class="prettyprint"><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="pun">--</span><span class="pln"> </span><span class="typ">Dimensions</span><span class="pln"> of the console</span><span class="str">'s buffer.<br>&nbsp; &nbsp; buffer_width<br>&nbsp; &nbsp; buffer_height<br><br>&nbsp; &nbsp; -- Dimensions of the visible area of the console buffer.<br>&nbsp; &nbsp; window_width<br>&nbsp; &nbsp; window_height<br>}</span></pre><h4><a name="clink.get_setting_str(name)"></a>clink.get_setting_str(name)<a href="https://code.google.com/p/clink/wiki/Documentation?tm=6#clink.get_setting_str(name)" class="section_anchor"></a></h4><p>Retrieves the Clink setting <i>name</i>, returning it as a string. See <strong>Settings</strong> for more information on the available settings. </p><h4><a name="clink.get_setting_int(name)"></a>clink.get_setting_int(name)<a href="https://code.google.com/p/clink/wiki/Documentation?tm=6#clink.get_setting_int(name)" class="section_anchor"></a></h4><p>As <i>clink.get_setting_str</i> but returning a number instead. </p><h4><a name="clink.is_dir(path)"></a>clink.is_dir(path)<a href="https://code.google.com/p/clink/wiki/Documentation?tm=6#clink.is_dir(path)" class="section_anchor"></a></h4><p>Returns true if <i>path</i> resolves to a directory. </p><h4><a name="clink.is_rl_variable_true(readline_var_name)"></a>clink.is_rl_variable_true(readline_var_name)<a href="https://code.google.com/p/clink/wiki/Documentation?tm=6#clink.is_rl_variable_true(readline_var_name)" class="section_anchor"></a></h4><p>Returns the boolean value of a Readline variable. These can be set with the clink_inputrc file, more details of which can be found in the <a href="http://tinyurl.com/oum26rp" rel="nofollow">Readline manual</a>. </p><h4><a name="clink.lower(text)"></a>clink.lower(text)<a href="https://code.google.com/p/clink/wiki/Documentation?tm=6#clink.lower(text)" class="section_anchor"></a></h4><p>Same as os.lower() but respects Readline's case-mapping feature which will consider - and <i> as case insensitive. </i></p><p>Care should be taken when using this to generate masks for file/dir find operations due to the -/<i> giving different results (unless of course Readline's extended case-mapping is disabled). </i></p><h4><a name="clink.match_files(pattern,_full_path,_find_func)"></a>clink.match_files(pattern, full_path, find_func)<a href="https://code.google.com/p/clink/wiki/Documentation?tm=6#clink.match_files(pattern,_full_path,_find_func)" class="section_anchor"></a></h4><p>Globs files using <i>pattern</i> and adds results as matches. If <i>full_path</i> is <i>true</i> then the path from <i>pattern</i> is prefixed to the results (otherwise only the file names are included). The last argument <i>find_func</i> is the function to use to do the globbing. If it's unspecified (or nil) Clink falls back to <i>clink.find_files</i>. </p><h4><a name="clink.match_words(text,_words)"></a>clink.match_words(text, words)<a href="https://code.google.com/p/clink/wiki/Documentation?tm=6#clink.match_words(text,_words)" class="section_anchor"></a></h4><p>Calls clink.is_match() on each word in the table <i>words</i> and adds matches to Clink that match the needle <i>text</i>. </p><h4><a name="clink.quote_split(str,_ql,_qr)"></a>clink.quote_split(str, ql, qr)<a href="https://code.google.com/p/clink/wiki/Documentation?tm=6#clink.quote_split(str,_ql,_qr)" class="section_anchor"></a></h4><p>This function takes the string <i>str</i> which is quoted by <i>ql</i> (the opening quote character) and <i>qr</i> (the closing character) and splits it into parts as per the quotes. A table of these parts is returned. </p><pre class="prettyprint"><span class="pln">clink</span><span class="pun">.</span><span class="pln">quote_split</span><span class="pun">(</span><span class="str">"pre(middle)post"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"("</span><span class="pun">,</span><span class="pln"> </span><span class="str">")"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="str">"pre"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"middle"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"post"</span><span class="pln"><br></span><span class="pun">}</span></pre><h4><a name="clink.slash_translation(type)"></a>clink.slash_translation(type)<a href="https://code.google.com/p/clink/wiki/Documentation?tm=6#clink.slash_translation(type)" class="section_anchor"></a></h4><p>Controls how Clink will translate the path separating slashes for the current path being completed. Values for <i>type</i> are;  </p><ul><li>-1 - no translation </li><li>0 - to backslashes </li><li>1 - to forward slashes. </li></ul><h4><a name="clink.split(str,_sep)"></a>clink.split(str, sep)<a href="https://code.google.com/p/clink/wiki/Documentation?tm=6#clink.split(str,_sep)" class="section_anchor"></a></h4><p>Splits the string <i>str</i> into pieces separated by <i>sep</i>, returning a table of the pieces. </p><h4><a name="clink.suppress_char_append()"></a>clink.suppress_char_append()<a href="https://code.google.com/p/clink/wiki/Documentation?tm=6#clink.suppress_char_append()" class="section_anchor"></a></h4><p>This stops Readline from adding a trailing character when completion is finished (usually when a single match is returned). The suffixing of a character is enabled before completion functions are called so a call to this will only apply for the current completion. </p><p>By default Readline appends a space character (' ') when the is only a single match unless it is completing files where it will use the path separator instead. </p><h4><a name="clink.suppress_quoting()"></a>clink.suppress_quoting()<a href="https://code.google.com/p/clink/wiki/Documentation?tm=6#clink.suppress_quoting()" class="section_anchor"></a></h4><p>Suppress the prefixing and suffixing of quotes even if there is a character in the current word being completed that would ordinarily need surrounding in quotes.  </p><h3><a name="Readline_Constants"></a>Readline Constants<a href="https://code.google.com/p/clink/wiki/Documentation?tm=6#Readline_Constants" class="section_anchor"></a></h3><p>Clink exposes a small amount of state from Readline in the global <i>rl_state</i> table. Readline's nomenclature is maintained (minus the <strong>rl</strong> prefix) so Readline's manual can also be used as reference. This table should be considered read-only - changes to the table's members are not fed back to Readline. </p><h4><a name="rl_state.line_buffer"></a>rl_state.line_buffer<a href="https://code.google.com/p/clink/wiki/Documentation?tm=6#rl_state.line_buffer" class="section_anchor"></a></h4><p>This variable contains the current state of the whole line being edited. </p><h4><a name="rl_state.point"></a>rl_state.point<a href="https://code.google.com/p/clink/wiki/Documentation?tm=6#rl_state.point" class="section_anchor"></a></h4><p>The current cursor position within the line buffer. </p><h2><a name="Powershell"></a>Powershell<a href="https://code.google.com/p/clink/wiki/Documentation?tm=6#Powershell" class="section_anchor"></a></h2><p>Clink has basic support for Powershell. In order to show completion correctly Clink needs to parse Powershell's prompt to extract the current directory. If the prompt has been customized Clink is unlikely to work as expected. </p>
 </div>
 </div>
 </td></tr><tr>
</tr></tbody></table>
 </div>



 <script src="./Documentation - clink - Bringing Bash's powerful command line editing to Microsoft Windows' cmd.exe - Google Project Hosting_files/prettify.js"></script>
 <script type="text/javascript">
 prettyPrint();
 </script>

<script type="text/javascript" src="./Documentation - clink - Bringing Bash's powerful command line editing to Microsoft Windows' cmd.exe - Google Project Hosting_files/dit_scripts.js"></script>



  
 
 
 <script type="text/javascript" src="./Documentation - clink - Bringing Bash's powerful command line editing to Microsoft Windows' cmd.exe - Google Project Hosting_files/ph_core.js"></script>
 
 <script type="text/javascript" src="./Documentation - clink - Bringing Bash's powerful command line editing to Microsoft Windows' cmd.exe - Google Project Hosting_files/ph_dwiki.js"></script>
 
 
 
 
</div> 

<div id="footer" dir="ltr">
 <div class="text">
 <a href="https://code.google.com/projecthosting/terms.html">Terms</a> -
 <a href="http://www.google.com/privacy.html">Privacy</a> -
 <a href="https://code.google.com/p/support/">Project Hosting Help</a>
 </div>
</div>
 <div class="hostedBy" style="margin-top: -20px;">
 <span style="vertical-align: top;">Powered by <a href="http://code.google.com/projecthosting/">Google Project Hosting</a></span>
 </div>

 
 


 
 



<div class="menuDiv instance0" id="menuDiv-projects-dropdown" style="display: none;"><div class="menuCategory default"></div><div class="menuCategory controls"><a class="menuItem" href="http://www.google.com/accounts/ServiceLogin?service=code&ltmpl=phosting&continue=https%3A%2F%2Fcode.google.com%2Fp%2Fclink%2Fwiki%2FDocumentation%3Ftm%3D6&amp;followup=https%3A%2F%2Fcode.google.com%2Fp%2Fclink%2Fwiki%2FDocumentation%3Ftm%3D6" style="display: block;">Sign in to see your favorites</a><hr class="menuSeparator"><a class="menuItem" href="https://code.google.com/hosting/" style="display: block;">Find open source projects...</a><a class="menuItem" href="https://code.google.com/hosting/createProject" style="display: block;">Create a project...</a></div></div><iframe id="rdbIndicator" width="100%" height="270" border="0" src="./Documentation - clink - Bringing Bash's powerful command line editing to Microsoft Windows' cmd.exe - Google Project Hosting_files/indicator.htm" style="display: none; border: 0; position: fixed; left: 0; top: 0; z-index: 2147483647"></iframe><textarea id="adlesse_unifier_magic_element_id" style="display: none;"></textarea></body></html>